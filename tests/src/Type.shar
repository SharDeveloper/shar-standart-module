module Main

type Type

def testType(write ok Int, write errorsCoordinates List)
    testType_FromListToList(ok, errorsCoordinates)
    testType_GetItem(ok, errorsCoordinates)
    testType_SetItem(ok, errorsCoordinates)
    testType_Put(ok, errorsCoordinates)

#noinline
def testType_FromListToList(write ok Int, write errorsCoordinates List)
    test: ok, errorsCoordinates
        Type.fromList({}).toList() == {}
        Type.fromList({1}).toList() == {1}
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).toList() == {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}

#noinline
def testType_GetItem(write ok Int, write errorsCoordinates List)
    test: ok, errorsCoordinates
        Type.fromList({}).typeGetItem(0) : error_outOfRange
        Type.fromList({}).typeGetItem(1) : error_outOfRange
        Type.fromList({}).typeGetItem(9223372036854775807) : error_outOfRange
        Type.fromList({}).typeGetItem(-1) : error_outOfRange
        Type.fromList({}).typeGetItem(-9223372036854775808) : error_outOfRange
        Type.fromList({1}).typeGetItem(0) == 1
        Type.fromList({1}).typeGetItem(1) : error_outOfRange
        Type.fromList({1}).typeGetItem(9223372036854775807) : error_outOfRange
        Type.fromList({1}).typeGetItem(-1) : error_outOfRange
        Type.fromList({1}).typeGetItem(-9223372036854775808) : error_outOfRange
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).typeGetItem(0) == 1
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).typeGetItem(2) == 3
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).typeGetItem(9) == 10
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).typeGetItem(10) : error_outOfRange
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).typeGetItem(9223372036854775807) : error_outOfRange
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).typeGetItem(-1) : error_outOfRange
        Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}).typeGetItem(-9223372036854775808) : error_outOfRange

#noinline
def testType_SetItem(write ok Int, write errorsCoordinates List)
    var t1 Type = Type.fromList({})
    var t2 Type = Type.fromList({1})
    var t3 Type = Type.fromList({1, 2, 3, 4, 5, 6, 7, 8, 9, 10})
    test: ok, errorsCoordinates
        t1.typeSetItem(0, 0) : error_outOfRange
        t1.toList() == {}
        t1.typeSetItem(1, 0) : error_outOfRange
        t1.toList() == {}
        t1.typeSetItem(9223372036854775807, 0) : error_outOfRange
        t1.toList() == {}
        t1.typeSetItem(-1, 0) : error_outOfRange
        t1.toList() == {}
        t1.typeSetItem(-9223372036854775808, 0) : error_outOfRange
        t1.toList() == {}
        t2.typeSetItem(0, 3).nothing?()
        t2.toList() == {3}
        t2.typeSetItem(0, 4).nothing?()
        t2.toList() == {4}
        t2.typeSetItem(1, 0) : error_outOfRange
        t2.toList() == {4}
        t2.typeSetItem(9223372036854775807, 0) : error_outOfRange
        t2.toList() == {4}
        t2.typeSetItem(-1, 0) : error_outOfRange
        t2.toList() == {4}
        t2.typeSetItem(-9223372036854775808, 0) : error_outOfRange
        t2.toList() == {4}
        t3.typeSetItem(0, 3).nothing?()
        t3.toList() == {3, 2, 3, 4, 5, 6, 7, 8, 9, 10}
        t3.typeSetItem(1, 5).nothing?()
        t3.toList() == {3, 5, 3, 4, 5, 6, 7, 8, 9, 10}
        t3.typeSetItem(9, 9).nothing?()
        t3.toList() == {3, 5, 3, 4, 5, 6, 7, 8, 9, 9}
        t3.typeSetItem(10, 0) : error_outOfRange
        t3.toList() == {3, 5, 3, 4, 5, 6, 7, 8, 9, 9}
        t3.typeSetItem(9223372036854775807, 0) : error_outOfRange
        t3.toList() == {3, 5, 3, 4, 5, 6, 7, 8, 9, 9}
        t3.typeSetItem(-1, 0) : error_outOfRange
        t3.toList() == {3, 5, 3, 4, 5, 6, 7, 8, 9, 9}
        t3.typeSetItem(-9223372036854775808, 0) : error_outOfRange
        t3.toList() == {3, 5, 3, 4, 5, 6, 7, 8, 9, 9}

#noinline
def testType_Put(write ok Int, write errorsCoordinates List)
    var t1 Type = Type.fromList({})
    var t2 Type = Type.fromList({1})
    var t3 Type = Type.fromList({1, 2, 3, 4})
    test: ok, errorsCoordinates
        t1.typePut(0, 2) : error_outOfRange
        t1.toList() == {}
        t1.typePut(1, 2) : error_outOfRange
        t1.toList() == {}
        t1.typePut(9223372036854775807, 2) : error_outOfRange
        t1.toList() == {}
        t1.typePut(-1, 2) : error_outOfRange
        t1.toList() == {}
        t1.typePut(-9223372036854775808, 2) : error_outOfRange
        t1.toList() == {}
        t2.typePut(0, '2') == 1
        t2.toList() == {'2'}
        t2.typePut(0, 3) == '2'
        t2.toList() == {3}
        t2.typePut(1, 0) : error_outOfRange
        t2.toList() == {3}
        t2.typePut(9223372036854775807, 0) : error_outOfRange
        t2.toList() == {3}
        t2.typePut(-1, 0) : error_outOfRange
        t2.toList() == {3}
        t2.typePut(-9223372036854775808, 0) : error_outOfRange
        t2.toList() == {3}
        t3.typePut(0, '-') == 1
        t3.toList() == {'-', 2, 3, 4}
        t3.typePut(1, 3) == 2
        t3.toList() == {'-', 3, 3, 4}
        t3.typePut(3, '0') == 4
        t3.toList() == {'-', 3, 3, '0'}
        t3.typePut(4, 1) : error_outOfRange
        t3.toList() == {'-', 3, 3, '0'}
        t3.typePut(9223372036854775807, 1) : error_outOfRange
        t3.toList() == {'-', 3, 3, '0'}
        t3.typePut(-1, 1) : error_outOfRange
        t3.toList() == {'-', 3, 3, '0'}
        t3.typePut(-9223372036854775808, 1) : error_outOfRange
        t3.toList() == {'-', 3, 3, '0'}
